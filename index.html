<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sayagyiâ€™s Winter Magic 2025</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  
  <header class="event-header">
    <div class="event-logo">â„ï¸</div>

    <div class="event-title-group">
      <h1>Sayagyiâ€™s Winter Magic 2025</h1>
      <p class="event-subtitle">
        Join Merry and the elves to save Christmas â€“ complete quests, craft gifts, and earn rewards!
      </p>
    </div>

    <div class="event-status-pill">
      Live Event Â· <span id="eventDaysLeft">12 days left</span>
    </div>

    
    <div class="auth-logged-in" id="authLoggedIn" style="display:none;">
      <span>Hi, <strong id="userNameDisplay"></strong> â„ï¸</span>
      <button type="button" id="logoutBtn">Log out</button>
      <button id="adminToggleBtn" class="admin-toggle" style="display:none;">
        Admin
      </button>
    </div>
  </header>

 
  <div class="snow-layer"></div>

  
  <div class="fx-layer fx-snowfall"></div>
  <div class="fx-layer fx-starlight"></div>
  <div class="fx-layer fx-aurora"></div>
  <div class="fx-layer fx-sparkles"></div>

  
  <div id="loginOverlay" class="login-overlay">
    <div class="login-overlay-inner">
      <h2>Welcome to Sayagyiâ€™s Winter Magic</h2>
      <p>Please log in with your student account to join the event.</p>

      <form id="authForm" class="auth-form">
        <input id="authEmail" type="email" placeholder="Email" required />
        <input id="authPassword" type="password" placeholder="Password" required />

        <div class="auth-buttons">
          <button type="submit" id="loginBtn">Log in</button>
        </div>

        <div id="authMessage" class="auth-message"></div>
      </form>

      <p class="login-overlay-hint">
        Only registered students may access this Christmas event.
      </p>
    </div>
  </div>

  
  <main class="event-layout">

   
    <nav class="event-nav">
      <button class="nav-btn active" data-panel="overview">ğŸŒŸ Overview</button>
      <button class="nav-btn" data-panel="elf-quests">ğŸ§ Elf Quests</button>
      <button class="nav-btn" data-panel="nice-naughty">ğŸ Nice & Naughty</button>
      <button class="nav-btn" data-panel="magic-pass">âœ¨ Magic Pass</button>
      <button class="nav-btn" data-panel="rewards">ğŸ† Shop</button>
    </nav>

    
    <section class="event-panels">

      
      <section class="panel active" id="panel-overview">
        <div class="panel-header">
          <h2>Event Overview</h2>
          <span class="badge badge-rare">Christmas 2025</span>
        </div>

        <div class="panel-grid">
          <article class="card card-large">
            <h3>Welcome to Snowfall Village ğŸ„</h3>
            <p>
              Mischievous elves are causing chaos around Sayagyiâ€™s Winter Village!
              Team up with <strong>Merry the Elf</strong>, craft Nice or Naughty gifts,
              and earn <strong>Winter Points</strong> to unlock exclusive rewards.
            </p>
            <ul class="list-bullets">
              <li>Complete <strong>daily Elf Quests</strong> for Elf Coins.</li>
              <li>Craft <strong>Nice or Naughty gifts</strong> for Santa.</li>
              <li>Unlock bonuses with the <strong>Magic Pass</strong>.</li>
              <li>Collect exclusive <strong>Christmas cosmetics & badges</strong>.</li>
            </ul>
          </article>

          <article class="card">
            <h3>Event Progress</h3>

            <div class="progress-block">
              <div class="progress-label">Season Level <span id="seasonLevel">1</span></div>
              <div class="progress-bar"><div class="progress-fill" id="seasonXpFill"></div></div>
              <div class="progress-text"><span id="seasonXpText">0 / 600 XP</span></div>
            </div>

            <div class="progress-block small-top">
              <div class="progress-label">
                Elf Coins <span id="elfCoinsValue">0</span>
              </div>
              <div class="progress-bar thin">
                <div class="progress-fill accent" id="elfCoinsFill"></div>
              </div>
            </div>
          </article>
        </div>
      </section>

     
      <section class="panel" id="panel-elf-quests">
        <div class="panel-header">
          <h2>Elf Quests</h2>
          <span class="badge">Daily Mission</span>
        </div>

        <p class="panel-intro">
          Visit the correct location on the map. A quest appears only if todayâ€™s mission is there.
        </p>

        
        <article class="card">
          <h3>Snowfall Village Map</h3>
          <p class="tiny-note">
            Tap a location to move there. If today's quest is here, it will appear below.
          </p>

          <div class="map-wrapper">
            <div class="map-bg"></div>
            <div id="playerMarker" class="player-marker"></div>

            <button class="map-location" data-location="iceRink" style="left: 18%; top: 62%;">Ice Rink</button>
            <button class="map-location" data-location="cafe" style="left: 65%; top: 68%;">Frozen Falls CafÃ©</button>
            <button class="map-location" data-location="stage" style="left: 52%; top: 30%;">North Pole Stage</button>
            <button class="map-location" data-location="market" style="left: 30%; top: 40%;">Winter Fair</button>
          </div>

          <p id="mapHint" class="map-hint">
            You are at the Village Gate. Tap a location to start exploring.
          </p>
        </article>

       
        <div class="card">
          <h3>Today's Quest</h3>

          <div id="todayQuestBox" class="quest-today empty-box">
            <p class="tiny-note">Go to the correct location to reveal the quest.</p>
          </div>

          
          <button id="completeQuestBtn" class="primary-btn disabled" disabled>
            ğŸ¤ Get Team Points
          </button>

          <p id="questStatusMessage" class="status-message"></p>
        </div>
      </section>

     
      <section class="panel" id="panel-nice-naughty">
        <div class="panel-header">
          <h2>Nice & Naughty with Santa</h2>
          <span class="badge badge-epic">Gift Workshop</span>
        </div>

        <p class="panel-intro">Craft magical presents at the Workshop Table.</p>

        <div class="panel-grid">
          <article class="card">
            <h3>Choose Your Side</h3>
            <div class="side-toggle">
              <button class="side-btn active" data-side="nice">ğŸ Nice</button>
              <button class="side-btn" data-side="naughty">ğŸ˜ˆ Naughty</button>
            </div>

            <div id="sideDescription" class="side-description">
              Craft heartwarming gifts that earn <strong>Nice Points</strong>.
            </div>

            <div class="recipe-box">
              <h4>Craft Your Own Recipe</h4>

              <div class="recipe-inputs">
                <input id="itemInputA" type="text" placeholder="Item 1 (e.g. Candy Cane)" />
                <span class="plus-sign">+</span>
                <input id="itemInputB" type="text" placeholder="Item 2 (e.g. Ribbon)" />
              </div>

              <p class="recipe-hint small">
                Type any two items and press <strong>â€œCraft Giftâ€</strong>.
              </p>
            </div>

            <button id="craftGiftBtn" class="primary-btn">âœ¨ Craft Gift</button>
            <p id="craftResult" class="status-message"></p>
          </article>

          <article class="card">
            <h3>Nice vs Naughty Progress</h3>

            <div class="progress-block">
  <div class="progress-label">
    <div>Nice Points <span id="niceTeamLevel" class="team-level">Lvl 1</span></div>
    <div id="nicePointsValue">0</div>
  </div>
  <div class="progress-bar"><div class="progress-fill" id="nicePointsFill"></div></div>
</div>

<div class="progress-block">
  <div class="progress-label">
    <div>Naughty Points <span id="naughtyTeamLevel" class="team-level">Lvl 1</span></div>
    <div id="naughtyPointsValue">0</div>
  </div>
  <div class="progress-bar"><div class="progress-fill accent" id="naughtyPointsFill"></div></div>
</div>

          </article>
        </div>
      </section>

      
      <section class="panel" id="panel-magic-pass">
        <div class="panel-header">
          <h2>Magic Pass</h2>
          <span class="badge badge-legendary">Premium Track</span>
        </div>

          <p id="magicPassTimer" class="panel-intro small"></p>


        <div class="panel-grid">
          <article class="card card-large">
            <h3>Unlock Extra Magic âœ¨</h3>
            <p>Magic Pass grants double Elf Coins, extra crafts, and exclusive cosmetics.</p>
            <ul class="list-bullets">
              <li>â­ 2Ã— Elf Coins</li>
              <li>ğŸ +3 gift crafts / day</li>
              <li>ğŸ„ Exclusive cosmetics</li>
              <li>ğŸ§ Special gift</li>
            </ul>
            <button id="togglePassBtn" class="primary-btn wide">ğŸ”’ Activate Magic Pass</button>
            <p id="passStatusText" class="status-message">Magic Pass is currently <strong>locked</strong>.</p>
          </article>

          <article class="card">
            <h3>Pass Preview</h3>
            <div class="pass-preview">
              <div class="pass-badge" id="passBadge">MAGIC PASS</div>
              <ul class="list-bullets small">
                <li>Bonus cosmetics track</li>
                <li>Free shop item</li>
                <li>ONE Golden Ticket (only for the first player subscribed to Magic Pass)</li>
              </ul>
            </div>
          </article>
        </div>
      </section>

      
      <section class="panel" id="panel-rewards">
        <div class="panel-header">
          <h2>Shop</h2>
          <span class="badge">Limited-Time Items</span>
        </div>

        <p class="panel-intro">
          Unlock exclusive Christmas rewards using Elf Coins, Nice/Naughty Points, and XP.
        </p>

        
        <h3 class="subheading">Themes</h3>
        <div class="reward-grid" id="rewardGrid"></div>

       
        <h3 class="subheading" style="margin-top: 16px;">Visual Effects</h3>
        <div class="reward-grid" id="effectGrid"></div>
      </section>

    </section>
  </main>

  
  <footer class="event-footer">
    <span>Â© 2025 Pen Noble English Language Academy Â· Sayagyiâ€™s Winter Magic</span>
  </footer>

 
  <section id="adminDashboard" class="admin-dashboard hidden">
    <div class="admin-card">
      <div class="admin-header-row">
        <h2>Admin Dashboard</h2>
        <button id="adminCloseBtn" class="admin-close-btn">âœ•</button>
      </div>

      <div class="admin-teams" id="adminTeamsSummary"></div>

      <h3 class="admin-subtitle">Players</h3>
      <div class="admin-table-wrapper">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Side</th>
              <th>Season Lvl</th>
              <th>XP</th>
              <th>Coins</th>
              <th>Magic Pass</th>
            </tr>
          </thead>
          <tbody id="adminUsersBody"></tbody>
        </table>
      </div>

      <h3 class="admin-subtitle">Recipes</h3>
      <div class="admin-table-wrapper">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Item 1</th>
              <th>Item 2</th>
              <th>Result</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminRecipesBody"></tbody>
        </table>
      </div>

      <form id="adminRecipeForm" class="admin-recipe-form">
        <div class="admin-recipe-row">
          <input id="recipeItemA" type="text" placeholder="Item 1 (e.g. Candy Cane)" />
          <span>+</span>
          <input id="recipeItemB" type="text" placeholder="Item 2 (e.g. Ribbon)" />
          <input id="recipeResult" type="text" placeholder="Result (e.g. Festive Treat ğŸ€)" />
          <button type="submit">Add</button>
        </div>
        <p class="admin-note small" id="adminRecipeMessage"></p>
      </form>

      <p class="admin-note">
        Only admins can see this dashboard. Data comes from Realtime Database
        (winterMagic2025/users & teams).
      </p>
    </div>
  </section>

 
  <script type="module" src="main.js"></script>

</body>
</html>
